<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.551">

  <meta name="author" content="Gerko Vink">
  <meta name="dcterms.date" content="2024-05-31">
  <title>challenges - Embrace the darkness</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Embrace the darkness</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Gerko Vink <a href="https://orcid.org/0000-0001-9767-1924" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
</div>
<div class="quarto-title-author-email">
<a href="mailto:g.vink@uu.nl">g.vink@uu.nl</a>
</div>
        <p class="quarto-title-affiliation">
            Methodology &amp; Statistics @ Utrecht University
          </p>
    </div>
</div>

  <p class="date">31 May 2024</p>
</section>
<section id="disclaimer" class="slide level2">
<h2>Disclaimer</h2>
<p>I owe a debt of gratitude to many people as the thoughts and code in these slides are the process of years-long development cycles and discussions with my team, friends, colleagues and peers. When someone has contributed to the content of the slides, I have credited their authorship.</p>
<p>Scientific references are in the footer. Opinions and figures are my own, AI-generated or directly linked.</p>
</section>
<section id="clichés-out-of-the-way" class="slide level2">
<h2>Clichés out of the way!</h2>
<blockquote>
<p>Everything is a missing data problem</p>
</blockquote>
<blockquote>
<p>All models are wrong, but some are useful</p>
</blockquote>
<blockquote>
<p>How wrong can a model be to still be useful?</p>
</blockquote>
</section>
<section id="topics-for-this-lecture" class="slide level2">
<h2>Topics for this lecture</h2>
<ul>
<li>Problem of dark data</li>
<li>Strategies to deal with missing data</li>
<li>Multiple imputation methodology to analyse incomplete data</li>
<li>Synthetic data sets for disclosure protection</li>
</ul>
</section>
<section id="what-is-dark-data" class="slide level2">
<h2>What is dark data?</h2>
<div class=".callout-note">
<p>Dark data are concealed from us, and that very fact means we are at risk of misunderstanding, of drawing incorrect conclusions, and of making poor decisions.</p>
</div>
</section>
<section class="slide level2">

<center>
<img data-src="img/darkdata.jpg" height="680">
</center>
</section>
<section id="dark-data-types" class="slide level2">
<h2>Dark data types</h2>
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">No</th>
<th style="text-align: left;">Description</th>
<th style="text-align: right;">No</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Data We Know Are Missing</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">Summaries of Data</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Data We Don’t Know are Missing</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Measurement Error and Uncertainty</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Choosing Just Some Cases</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">Feedback and Gaming</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Self-Selection</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">Information Asymmetry</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Missing What Matters</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">Intentionally Darkened Data</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Data Which Might Have Been</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">Fabricated and Synthetic Data</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Changes with Time</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Extrapolating beyond Your Data</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Definitions of Data</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">Data not yet observable</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</section>
<section id="concepts-definition" class="slide level2">
<h2><strong>Concepts</strong>: Definition</h2>
<ul>
<li>Missing values are those values that are not observed</li>
<li>Values do exist in theory, but we are unable to see them</li>
</ul>
</section>
<section id="concepts-reasons" class="slide level2">
<h2><strong>Concepts</strong>: Reasons</h2>
<p>Missing or dark data can occur for a lot of reasons. Or for no reason at all. For example</p>
<ul>
<li>Intentional: Sample, predict, combine, estimate
<ul>
<li>routing</li>
<li>experimental design</li>
<li>join, merge and bind operations</li>
</ul></li>
<li>Unintentional:
<ul>
<li>dropout, refusal, concealed</li>
<li>too far away, too small to observe</li>
<li>power failure, budget exhausted, bad luck</li>
</ul></li>
</ul>
</section>
<section id="consequences-why-are-missing-values-problematic" class="slide level2">
<h2><strong>Consequences</strong>: Why are missing values problematic?</h2>
<ul>
<li>Cannot calculate, not even the mean</li>
<li>Less information than planned</li>
<li>Enough statistical power?</li>
<li>Different analyses, different <span class="math inline">\(n\)</span>’s</li>
<li>Systematic biases in the analysis</li>
<li>Appropriate confidence interval, <span class="math inline">\(p\)</span>-values?</li>
</ul>
<div class="fragment">
<p>Missing data can severely complicate interpretation and analysis</p>
</div>
</section>
<section id="notation-y-r-x" class="slide level2">
<h2><strong>Notation</strong>: <span class="math inline">\(Y\)</span>, <span class="math inline">\(R\)</span>, <span class="math inline">\(X\)</span></h2>
<div class="quarto-layout-panel" data-layout="[ 40, 60 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 40.0%;justify-content: center;">
<p><img data-src="figures/mdpattern.png" width="400"></p>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 60.0%;justify-content: flex-start;">
<p><br></p>
<ul>
<li><span class="math inline">\(Y\)</span> random variable with missing data</li>
<li><span class="math inline">\(Y^\mathrm{obs}\)</span> true and observed values of <span class="math inline">\(Y\)</span></li>
<li><span class="math inline">\(Y^\mathrm{mis}\)</span> true but unobserved values of <span class="math inline">\(Y\)</span></li>
</ul>
<p><br></p>
<ul>
<li><span class="math inline">\(X\)</span> complete covariate</li>
</ul>
<p><br></p>
<ul>
<li><span class="math inline">\(R\)</span> response indicator</li>
<li><span class="math inline">\(R = 1\)</span> if <span class="math inline">\(Y\)</span> is observed</li>
<li><span class="math inline">\(R = 0\)</span> if <span class="math inline">\(Y\)</span> is missing</li>
</ul>
</div>
</div>
</div>
</section>
<section id="types-of-distributions" class="slide level2">
<h2>Types of distributions</h2>
<ul>
<li><strong>Marginal distribution</strong> <span class="math inline">\(P(Y)\)</span>
<ul>
<li>frequency distribution/histogram of <span class="math inline">\(Y\)</span></li>
<li>normal distribution with mean <span class="math inline">\(\mu\)</span> and variance <span class="math inline">\(\sigma^2\)</span></li>
</ul></li>
<li><strong>Joint distribution</strong> <span class="math inline">\(P(Y, X)\)</span>
<ul>
<li>contingency table/scatterplot of <span class="math inline">\(Y\)</span> and <span class="math inline">\(X\)</span></li>
<li>bivariate normal distribution</li>
</ul></li>
<li><strong>Conditional distribution</strong> <span class="math inline">\(P(Y | X)\)</span>
<ul>
<li>distribution of <span class="math inline">\(Y\)</span> at a given value of <span class="math inline">\(X\)</span></li>
<li>regression model with normally distributed errors</li>
</ul></li>
</ul>
<!-- # Two types of models {background-color="#2a76dd"} -->
</section>
<section id="the-complete-data-model" class="slide level2">
<h2>The complete-data model</h2>
<ul>
<li>The model we would like to fit if we had complete data</li>
<li>The model of scientific interest</li>
<li>Examples:
<ul>
<li><span class="math inline">\(P(Y | X, \theta)\)</span>: Predict blood pressure <span class="math inline">\(Y\)</span> from health <span class="math inline">\(X\)</span></li>
<li><span class="math inline">\(P(\theta | Y)\)</span>: Estimate gross domestic product <span class="math inline">\(\theta\)</span> from production <span class="math inline">\(Y\)</span></li>
</ul></li>
</ul>
</section>
<section id="the-missing-data-model-mechanism" class="slide level2">
<h2>The missing data model (mechanism)</h2>
<ul>
<li>The model that explains what is observed</li>
<li>Often not of direct scientific interest</li>
<li>Examples:
<ul>
<li><span class="math inline">\(P(R | Y, X, \psi)\)</span>: Missingness depends on design covariates <span class="math inline">\(X\)</span></li>
<li><span class="math inline">\(P(R | Y, \psi)\)</span>: Missingness depends on incomplete <span class="math inline">\(Y\)</span></li>
</ul></li>
</ul>
</section>
<section>
<section id="missing-data-mechanisms" class="title-slide slide level1 center" data-background-color="#2a76dd">
<h1>Missing data mechanisms</h1>

</section>
<section id="missing-data-mechanism-a-key-assumption" class="slide level2">
<h2>Missing data mechanism: A key assumption</h2>
<ul>
<li><p>We assume we know <strong>where</strong> the missing data are</p></li>
<li><p>Cases where the assumption does not hold:</p>
<ul>
<li>“Tick any of the following” (we don’t know which values are real)</li>
<li>Truncated data (we don’t know how many values are missing)</li>
</ul></li>
</ul>
</section>
<section id="missing-data-mechanism-definition" class="slide level2">
<h2>Missing data mechanism: Definition</h2>
<ul>
<li>Process that governs which <span class="math inline">\(Y\)</span>s are observed and which <span class="math inline">\(Y\)</span>s are unobserved (Rubin, 1976)</li>
<li>Sometimes we know this process (e.g.~experimental design, sampling)</li>
<li>Model by response probability <span class="math inline">\(P(R | Y^\mathrm{obs}, Y^\mathrm{mis}, X)\)</span></li>
<li>Also called <strong>missing data model</strong></li>
</ul>
</section>
<section id="mcar-missing-completely-at-random" class="slide level2">
<h2>MCAR: Missing Completely at Random</h2>
<ul>
<li>Probability to be missing is not related to any data</li>
</ul>
<div class="fragment">
<p><span class="math display">\[
P(R|Y^\mathrm{obs}, Y^\mathrm{mis}, X, \psi) = P(R|\psi)
\]</span></p>
<ul>
<li>Examples
<ul>
<li>data transmission error</li>
<li>random sample</li>
</ul></li>
</ul>
<p>David Hand calls this mechanism <strong>Not Data Dependent</strong></p>
</div>
</section>
<section id="mar-missing-at-random" class="slide level2">
<h2>MAR: Missing at Random</h2>
<ul>
<li>Probability to be missing depends on known data</li>
</ul>
<div class="fragment">
<p><span class="math display">\[
P(R|Y^\mathrm{obs}, Y^\mathrm{mis}, X, \psi) = P(R|Y^\mathrm{obs}, X, \psi)
\]</span></p>
<ul>
<li>Examples
<ul>
<li>Income, where we have <span class="math inline">\(X\)</span> related to wealth</li>
<li>Branch patterns (e.g.&nbsp;how old are your children?)</li>
</ul></li>
</ul>
<p>David Hand calls this mechanism <strong>Seen Data Dependent</strong></p>
</div>
</section>
<section id="mnar-missing-not-at-random" class="slide level2">
<h2>MNAR: Missing Not at Random</h2>
<ul>
<li>Probability to be missing depends on unknown data</li>
</ul>
<div class="fragment">
<p><span class="math display">\[
P(R|Y^\mathrm{obs}, Y^\mathrm{mis}, X, \psi)
\]</span></p>
<p>does not simplify</p>
<ul>
<li>Examples
<ul>
<li>Income, without covariates related to income</li>
<li>Body weight report</li>
</ul></li>
</ul>
<p>David Hand calls this mechanism <strong>Unseen Data Dependent</strong></p>
</div>
</section>
<section id="missing-data-mechanisms-roundup" class="slide level2">
<h2>Missing data mechanisms: roundup</h2>
<ul>
<li><strong>Missing Completely at Random</strong> (MCAR)
<ul>
<li>missingness is purely random</li>
<li>relatively easy to deal with</li>
</ul></li>
<li><strong>Missing at Random</strong> (MAR)
<ul>
<li>missingness related to observed information</li>
<li>widely used for principled analysis</li>
</ul></li>
<li><strong>Missing Not at Random</strong> (MNAR)
<ul>
<li>missingness related to unobserved information</li>
<li>cannot detect this from the data</li>
<li>difficult to deal with, need context information</li>
</ul></li>
</ul>
</section>
<section id="missing-data-mechanisms-graphical-representation" class="slide level2">
<h2>Missing data mechanisms: Graphical representation</h2>

<img data-src="figures/DAG.png" class="r-stretch"><div class="footer">
<p>Schafer, J. L. &amp; Graham, J. W. (2002). Missing Data. Psychological Methods, 7 (2), 147-177. <a href="https://pubmed.ncbi.nlm.nih.gov/12090408/">doi: 10.1037/1082-989X.7.2.147</a></p>
</div>
</section>
<section id="missing-data-mechanisms-alternative-terminology" class="slide level2">
<h2>Missing data mechanisms: Alternative terminology</h2>
<ul>
<li>Not Data Dependent (~MCAR)
<ul>
<li>It’s missing for reasons unrelated to the data</li>
<li>Probability to be missing is constant for all units</li>
<li>E.g. some students not sitting an exam due to flu symptoms</li>
</ul></li>
<li>Seen Data Dependent (~MAR)
<ul>
<li>It’s missing for reasons related to data you have got</li>
<li>Probability to be missing depends on <em>observed</em> data</li>
<li>E.g. school discouraging lower performing students from sitting exam</li>
</ul></li>
<li>Unseen Data Dependent (~MNAR)
<ul>
<li>Missing because of the values you would have obtained</li>
<li>Probability to be missing depends on <em>unobserved</em> data</li>
<li>E.g. students realized revised wrong material, so didn’t sit exam</li>
</ul></li>
</ul>
<!-- https://infomdwr.nl/lectures/week_7/1_missing_data_1.pdf -->
</section>
<section id="uwe-aickelin-what-to-do-with-the-missing-data" class="slide level2">
<h2>Uwe Aickelin: What to do with the missing data?</h2>
<p><a href="https://www.youtube.com/watch?v=oCQbC818KKU" class="uri">https://www.youtube.com/watch?v=oCQbC818KKU</a></p>
</section>
<section id="lessons-from-uwe-aickelin" class="slide level2">
<h2>Lessons from Uwe Aickelin</h2>
<ul>
<li>You could obtain the data, but it’s not there</li>
<li>Quality of data is going down - big data</li>
<li>Why not go back to expert? Impractical</li>
<li>Why not delete? What to delete?</li>
<li>Reasons for missing data are important</li>
<li>Missing (Completely?) at Random</li>
<li>How impute? Mean, random, mean per group</li>
<li>Software cannot handle missing data</li>
<li>Forced internet surveys</li>
</ul>
</section></section>
<section>
<section id="strategies-to-deal-with-missing-data" class="title-slide slide level1 center" data-background-color="#2a76dd">
<h1>Strategies to deal with missing data</h1>

</section>
<section id="strategies" class="slide level2">
<h2>Strategies</h2>
<ol type="1">
<li>Prevention</li>
<li>Ad-hoc methods, e.g., single imputation, complete cases</li>
<li>Weighting methods</li>
<li>Likelihood methods, EM-algorithm</li>
<li>Multiple imputation</li>
</ol>
</section>
<section id="strategies-1" class="slide level2">
<h2>Strategies</h2>
<div>
<ol type="1">
<li><strong>Prevention</strong></li>
<li>Ad-hoc methods, e.g., single imputation, complete cases</li>
<li>Weighting methods</li>
<li>Likelihood methods, EM-algorithm</li>
<li>Multiple imputation</li>
</ol>
</div>
</section>
<section id="section" class="slide level2" data-background-color="#2a76dd">
<h2></h2>
<div style="margin-top: 40px; font-size: 3.5em;">
<p><strong>Prevent unintended missing data</strong></p>
</div>
</section>
<section id="prevention-strategies" class="slide level2">
<h2>1. Prevention strategies</h2>
<ul>
<li>Design: Time intervals, Number of variables, Pilot study</li>
<li>Collection: Incentives, Match interviewer-respondent, Quick follow-up, Retrieve missing data</li>
<li>Measures: Use short forms, Minimize intrusive measures, Clarity, Layout</li>
<li>Treatment: Minimize burden and intensity</li>
</ul>
</section>
<section id="strategies-2" class="slide level2">
<h2>Strategies</h2>
<div>
<ol type="1">
<li>Prevention</li>
<li><strong>Ad-hoc methods, e.g., single imputation, complete cases</strong></li>
<li>Weighting methods</li>
<li>Likelihood methods, EM-algorithm</li>
<li>Multiple imputation</li>
</ol>
</div>
</section>
<section id="section-1" class="slide level2" data-background-color="#2a76dd">
<h2></h2>
<div style="margin-top: 40px; font-size: 3.5em;">
<p><strong>Ad-hoc methods make strong assumptions</strong></p>
</div>
</section>
<section id="ad-hoc-strategies" class="slide level2">
<h2>2. Ad-hoc strategies</h2>
<ul>
<li>Listwise deletion</li>
<li>Mean imputation</li>
<li>Regression imputation</li>
<li>Stochastic regression imputation</li>
<li>Last observation carried forward (LOCF)</li>
<li>Indicator method</li>
</ul>
</section>
<section id="listwise-deletion" class="slide level2">
<h2>Listwise deletion</h2>
<ul>
<li>Analyze only the complete records</li>
<li>Also know as: complete-case analysis</li>
<li>Advantages
<ul>
<li>Simple (default in most software)</li>
<li>Unbiased under MCAR</li>
<li>Conservative standard errors, significance levels</li>
<li>Two special properties in regression</li>
</ul></li>
</ul>
</section>
<section id="listwise-deletion-1" class="slide level2">
<h2>Listwise deletion</h2>
<ul>
<li>Disadvantages
<ul>
<li>Wasteful</li>
<li>May not be possible</li>
<li>Larger standard errors</li>
<li>Biased under MAR, even for simple statistics like the mean</li>
<li>Inconsistencies in reporting</li>
</ul></li>
</ul>
</section>
<section id="listwise-deletion-special-properties" class="slide level2">
<h2>Listwise deletion: Special properties</h2>
<ul>
<li>For any regression with missing data in the predictors, estimates under listwise deletion are unbiased as long as the missingness does not depend on the outcome. Even some MNAR cases (Glynn 1986; Little 1992).</li>
<li>In logistic regression only: With missing data in either the outcome <span class="math inline">\(Y\)</span> or the predictors <span class="math inline">\(X\)</span> (but not both), estimates of regression weights (but not the intercept) after listwise deletion are unbiased as long as the missingness depends only on <span class="math inline">\(Y\)</span> (and not on <span class="math inline">\(X\)</span>!) (Vach 1994). This property is widely exploited in case-control studies in epidemiology.</li>
<li>See FIMD 2.7: <a href="https://stefvanbuuren.name/fimd/sec-when.html" class="uri">https://stefvanbuuren.name/fimd/sec-when.html</a></li>
</ul>
</section>
<section id="mean-imputation" class="slide level2">
<h2>Mean imputation</h2>
<ul>
<li>Replace the missing values by the mean of the observed data</li>
<li>Advantages
<ul>
<li>Simple</li>
<li>Unbiased for the mean, under MCAR</li>
</ul></li>
</ul>
</section>
<section id="mean-imputation-1" class="slide level2">
<h2>Mean imputation</h2>

<img data-src="dark_files/figure-revealjs/unnamed-chunk-1-1.png" width="864" class="r-stretch"></section>
<section id="mean-imputation-2" class="slide level2">
<h2>Mean imputation</h2>
<ul>
<li>Disadvantages
<ul>
<li>Disturbs the distribution</li>
<li>Underestimates the variance</li>
<li>Biases correlations to zero</li>
<li>Biased under MAR</li>
</ul></li>
<li>AVOID (unless you know what you are doing)</li>
</ul>
</section>
<section id="regression-imputation" class="slide level2">
<h2>Regression imputation</h2>
<ul>
<li>Also known as <strong>prediction</strong>
<ul>
<li>Fit model for <span class="math inline">\(Y^\mathrm{obs}\)</span> under listwise deletion</li>
<li>Predict <span class="math inline">\(Y^\mathrm{mis}\)</span> for records with missing <span class="math inline">\(Y\)</span>s</li>
<li>Replace missing values by prediction</li>
</ul></li>
<li>Advantages
<ul>
<li>Under MAR, unbiased estimates of regression coefficients</li>
<li>Good approximation to the (unknown) true data if explained variance is high</li>
</ul></li>
<li>Favourite among data scientists and machine learners</li>
</ul>
</section>
<section id="regression-imputation-1" class="slide level2">
<h2>Regression imputation</h2>

<img data-src="dark_files/figure-revealjs/unnamed-chunk-2-1.png" width="864" class="r-stretch"></section>
<section id="regression-imputation-2" class="slide level2">
<h2>Regression imputation</h2>
<ul>
<li>Disadvantages
<ul>
<li>Artificially increases correlations</li>
<li>Systematically underestimates the variance</li>
<li>Too optimistic <span class="math inline">\(p\)</span>-values and too short confidence intervals</li>
</ul></li>
<li>AVOID. Harmful to statistical inference</li>
</ul>
</section>
<section id="stochastic-regression-imputation" class="slide level2">
<h2>Stochastic regression imputation</h2>
<ul>
<li>Like regression imputation, but adds appropriate noise to the predictions to reflect uncertainty</li>
<li>Advantages
<ul>
<li>Preserves the distribution of <span class="math inline">\(Y^\mathrm{obs}\)</span></li>
<li>Preserves the correlation between <span class="math inline">\(Y\)</span> and <span class="math inline">\(X\)</span> in the imputed data</li>
</ul></li>
</ul>
</section>
<section id="stochastic-regression-imputation-1" class="slide level2">
<h2>Stochastic regression imputation</h2>

<img data-src="dark_files/figure-revealjs/unnamed-chunk-3-1.png" width="864" class="r-stretch"></section>
<section id="stochastic-regression-imputation-2" class="slide level2">
<h2>Stochastic regression imputation</h2>
<ul>
<li>Disadvantages
<ul>
<li>Symmetric and constant error restrictive</li>
<li>Single imputation: does not take uncertainty imputed data into account, and incorrectly treats them as real</li>
<li>Not so simple anymore</li>
</ul></li>
</ul>
</section>
<section id="overview-of-assumptions-needed" class="slide level2">
<h2>Overview of assumptions needed</h2>
<table>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td style="text-align: center;">Unbiased</td>
<td></td>
<td>Standard Error</td>
</tr>
<tr class="even">
<td></td>
<td>Mean</td>
<td style="text-align: center;">Reg Weight</td>
<td>Correlation</td>
<td></td>
</tr>
<tr class="odd">
<td>Listwise</td>
<td>MCAR</td>
<td style="text-align: center;">MCAR</td>
<td>MCAR</td>
<td>Too large</td>
</tr>
<tr class="even">
<td>Pairwise</td>
<td>MCAR</td>
<td style="text-align: center;">MCAR</td>
<td>MCAR</td>
<td>Complicated</td>
</tr>
<tr class="odd">
<td>Mean</td>
<td>MCAR</td>
<td style="text-align: center;">–</td>
<td>–</td>
<td>Too small</td>
</tr>
<tr class="even">
<td>Regression</td>
<td>MAR</td>
<td style="text-align: center;">MAR</td>
<td>–</td>
<td>Too small</td>
</tr>
<tr class="odd">
<td>Stochastic</td>
<td>MAR</td>
<td style="text-align: center;">MAR</td>
<td>MAR</td>
<td>Too small</td>
</tr>
<tr class="even">
<td>LOCF</td>
<td>–</td>
<td style="text-align: center;">–</td>
<td>–</td>
<td>Too small</td>
</tr>
<tr class="odd">
<td>Indicator</td>
<td>–</td>
<td style="text-align: center;">–</td>
<td>–</td>
<td>Too small</td>
</tr>
</tbody>
</table>
</section>
<section id="strategies-3" class="slide level2">
<h2>Strategies</h2>
<div>
<ol type="1">
<li>Prevention</li>
<li>Ad-hoc methods, e.g., single imputation, complete cases</li>
<li><strong>Weighting methods</strong></li>
<li>Likelihood methods, EM-algorithm</li>
<li>Multiple imputation</li>
</ol>
</div>
</section>
<section id="section-2" class="slide level2" data-background-color="#2a76dd">
<h2></h2>
<div style="margin-top: 40px; font-size: 3.5em;">
<p><strong>Weighting minimizes bias with unit nonresponse</strong></p>
</div>
</section>
<section id="weighting" class="slide level2">
<h2>3. Weighting</h2>
<ul>
<li>Take the complete cases</li>
<li>Re-weight any statistic to the distribution of the covariates in the population</li>
<li>Advantages
<ul>
<li>Simple (one set of weights for all incomplete variables)</li>
<li>Reduces bias under MAR assumption</li>
<li>Standard methodology in official statistics</li>
</ul></li>
<li>Disadvantages
<ul>
<li>Discards data, increases the variance</li>
<li>Weights may not be available</li>
<li>Needs special variance estimators</li>
<li>Limited to unit non-response</li>
</ul></li>
</ul>
<p>For inferences purposes, proper imputation strategies prove to quickle become more efficient and more accurate than weighting strategies (Boeschoten et al., 2017).</p>
<div class="footer">
<p>Boeschoten, L., Vink, G., &amp; Hox, J. J. C. M. (2017). How to Obtain Valid Inference under Unit Nonresponse? Journal of Official Statistics, 33(4), 963-978. <a href="https://doi.org/10.1515/jos-2017-0045">https://doi.org/10.1515/jos-2017-0045</a></p>
</div>
</section>
<section id="strategies-4" class="slide level2">
<h2>Strategies</h2>
<div>
<ol type="1">
<li>Prevention</li>
<li>Ad-hoc methods, e.g., single imputation, complete cases</li>
<li>Weighting methods</li>
<li><strong>Likelihood methods, EM-algorithm</strong></li>
<li>Multiple imputation</li>
</ol>
</div>
</section>
<section id="section-3" class="slide level2" data-background-color="#2a76dd">
<h2></h2>
<div style="margin-top: 40px; font-size: 3.5em;">
<p><strong>Maximum likelihood: The royal road to missing data</strong></p>
</div>
</section>
<section id="maximum-likelihood" class="slide level2">
<h2>4. Maximum likelihood</h2>
<ul>
<li>EM-algorithm, Full Information Maximum Likelihood (FIML)</li>
<li>Iterative methods to estimate parameters that “skip over” the missing data</li>
<li>Advantages:
<ul>
<li>Theoretically sound, optimizes likelihood calculation directly</li>
<li>Many applications, widely accepted</li>
<li>Easy to apply (when there is software)</li>
</ul></li>
<li>Disadvantages:
<ul>
<li>Local minima, slow convergence</li>
<li>Difficult to apply outside standard models</li>
<li>Complete-data model becomes large and complex</li>
</ul></li>
</ul>
<!-- ## Maximum likelihood software -->
<!-- -   Mixed models: Proc Mixed (SAS), MLWin -->
<!-- -   Structural models: AMOS, Mplus, Mx -->
<!-- -   Rasch analyse: RUMM2030 -->
</section>
<section id="strategies-5" class="slide level2">
<h2>Strategies</h2>
<div>
<ol type="1">
<li>Prevention</li>
<li>Ad-hoc methods, e.g., single imputation, complete cases</li>
<li>Weighting methods</li>
<li>Likelihood methods, EM-algorithm</li>
<li><strong>Multiple imputation</strong></li>
</ol>
</div>
</section>
<section id="section-4" class="slide level2" data-background-color="#2a76dd">
<h2></h2>
<div style="margin-top: 40px; font-size: 3.5em;">
<p><strong>Multiple imputation is an all-round principled method</strong></p>
</div>
</section>
<section id="multiple-imputation" class="slide level2">
<h2>5. Multiple imputation</h2>
<ul>
<li>One imputation cannot be correct in general</li>
<li>Imputes each missing value <span class="math inline">\(m\)</span> times</li>
<li>Variation between the <span class="math inline">\(m\)</span> imputed values reflects our ignorance about the unknown value</li>
</ul>
</section>
<section id="multiple-imputation-workflow" class="slide level2">
<h2>Multiple imputation workflow</h2>
<center>
<img data-src="figures/ch01-miflow-1.png" height="600">
</center>
</section>
<section id="multiple-imputation---1987" class="slide level2">
<h2>Multiple imputation - 1987</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/rubin1987_cover.jpeg" width="400"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="figures/Donald-Rubin-HS-768x768.jpg" width="500"></p>
</div>
</div>
</div>
</section>
<section id="multiple-imputation-1" class="slide level2">
<h2>Multiple imputation</h2>
<ul>
<li>Advantages
<ul>
<li>Correct point and variance estimates</li>
<li>Splits missing data problem from complete-data analysis</li>
<li>Theoretical properties well established</li>
<li>Flexible, widely applicable</li>
<li>Extensible to MNAR</li>
</ul></li>
<li>Disadvantages
<ul>
<li>Need to create and work with multiple imputed data sets</li>
<li>May not always be most efficient</li>
</ul></li>
</ul>
</section>
<section id="what-is-the-goal-of-multiple-imputation" class="slide level2">
<h2>What is the goal of multiple imputation?</h2>
<p>The goal:</p>
<ul>
<li><strong>IS NOT</strong> to find the correct value for a missing data point</li>
<li><strong>IS</strong> to find an answer to the analysis problem, given that there are (many) data points missing.</li>
</ul>
<p>We are not interested in whether the imputed value corresponds to its true counterpart in the population, but we rather sample plausible values that could have been from the posterior predictive distribution</p>
</section>
<section id="demonstration-of-imputation" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>Let our analysis model be</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>boys <span class="sc">%$%</span> <span class="co"># use the exposition pipe</span></span>
<span id="cb1-2"><a></a>  <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="demonstration-of-imputation-1" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>with output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>boys <span class="sc">%$%</span> </span>
<span id="cb2-2"><a></a>  <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = hgt ~ age + tv)

Residuals:
    Min      1Q  Median      3Q     Max 
-24.679  -5.134  -0.398   5.175  23.778 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 105.4823     3.4704  30.395  &lt; 2e-16 ***
age           3.8430     0.3262  11.782  &lt; 2e-16 ***
tv            0.4919     0.1278   3.849 0.000155 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.389 on 221 degrees of freedom
  (524 observations deleted due to missingness)
Multiple R-squared:  0.7742,    Adjusted R-squared:  0.7721 
F-statistic: 378.8 on 2 and 221 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="demonstration-of-imputation-2" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>generated on 224 cases. The full data size is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>boys <span class="sc">%&gt;%</span> <span class="fu">dim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 748   9</code></pre>
</div>
</div>
</section>
<section id="demonstration-of-imputation-3" class="slide level2">
<h2>Demonstration of imputation</h2>
<p>To impute and analyze the same model with <code>mice</code>, we can simply run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a></a>  <span class="fu">pool</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate  std.error  statistic       df      p.value
1 (Intercept) 71.5467019 0.61617119 116.114975 735.4492 0.000000e+00
2         age  7.0475726 0.09475359  74.377898  75.9456 1.043045e-72
3          tv -0.5577935 0.09163996  -6.086793  39.9114 3.598196e-07</code></pre>
</div>
</div>
<center>
<img data-src="img/imp_process.png" style="width:60.0%">
</center>
</section>
<section id="what-have-we-done" class="slide level2">
<h2>What have we done?</h2>
<p>We have used <code>mice</code> to obtain draws from a posterior predictive distribution of the missing data, conditional on the observed data.</p>
<p>The imputed values are mimicking the sampling variation and can be used to infer about the underlying TDGM, <strong>if and only if</strong>:</p>
<ul>
<li>The observed data holds the information about the missing data (MAR/MCAR)</li>
</ul>
</section></section>
<section>
<section id="synthetic-data-generation" class="title-slide slide level1 center">
<h1>Synthetic data generation</h1>

</section>
<section id="imputation-vs-synthetisation" class="slide level2">
<h2>Imputation vs Synthetisation</h2>
<p>Instead of drawing only imputations from the posterior predictive distribution, we might as well overimpute the observed data. <img data-src="img/patterns.png"></p>
</section>
<section id="how-to-draw-synthetic-data-sets-with-mice" class="slide level2">
<h2>How to draw synthetic data sets with <code>mice</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a></a>  <span class="fu">pool</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate std.error statistic       df      p.value
1 (Intercept) 71.4727297 0.7637067 93.586620 71.79955 8.889816e-77
2         age  6.8882608 0.1210342 56.911699 21.81539 3.232474e-25
3          tv -0.4038602 0.1028084 -3.928281 33.89849 3.989687e-04</code></pre>
</div>
</div>
<center>
<img data-src="img/synth_process.png" style="width:60.0%">
</center>
<p>But we make an error!</p>
</section>
<section id="pooling-in-imputation" class="slide level2">
<h2>Pooling in imputation</h2>
<p>Rubin (1987, p76) defined the following rules:</p>
<p>For any number of multiple imputations <span class="math inline">\(m\)</span>, the combination of the analysis results for any estimate <span class="math inline">\(\hat{Q}\)</span> of estimand <span class="math inline">\(Q\)</span> with corresponding variance <span class="math inline">\(U\)</span>, can be done in terms of the average of the <span class="math inline">\(m\)</span> complete-data estimates</p>
<p><span class="math display">\[\bar{Q} = \sum_{l=1}^{m}\hat{Q}_l / m,\]</span></p>
<p>and the corresponding average of the <span class="math inline">\(m\)</span> complete data variances</p>
<p><span class="math display">\[\bar{U} = \sum_{l=1}^{m}{U}_l / m.\]</span></p>
<div class="footer">
<p>Rubin, D.B. (1987). Multiple Imputation for Nonresponse in Surveys. New York: John Wiley and Sons.</p>
</div>
</section>
<section id="pooling-in-imputation-1" class="slide level2">
<h2>Pooling in imputation</h2>
<p>Simply using <span class="math inline">\(\bar{Q}\)</span> and <span class="math inline">\(\bar{U}_m\)</span> to obtain our inferences would be to simplistic. In that case we would ignore any possible variation between the separate <span class="math inline">\(\hat{Q}_l\)</span> and the fact that we only generate a finite set of imputations <span class="math inline">\(m\)</span>. Rubin (1987, p.&nbsp;76) established that the total variance <span class="math inline">\(T\)</span> of <span class="math inline">\((Q-\bar{Q})\)</span> would equal</p>
<p><span class="math display">\[T = \bar{U} + B + B/m,\]</span></p>
<p>Where the between imputation variance <span class="math inline">\(B\)</span> is defined as</p>
<p><span class="math display">\[B = \sum_{l=1}^{m}(\hat{Q}_l - \bar{Q})^\prime(\hat{Q}_l - \bar{Q}) / (m-1)\]</span></p>
<p><strong>This assumes that some of the data are observed and remain constant over the synthetic sets</strong></p>
<p>The total variance <span class="math inline">\(T\)</span> of <span class="math inline">\((Q-\bar{Q})\)</span> should (Reiter, 2003) equal</p>
<p><span class="math display">\[T = \bar{U} + B/m.\]</span></p>
<div class="footer">
<p>Reiter, J.P. (2003). Inference for Partially Synthetic, Public Use Microdata Sets. Survey Methodology, 29, 181-189.</p>
</div>
</section>
<section id="so-the-correct-code-is" class="slide level2">
<h2>So, the correct code is</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>boys <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">5</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a></a>  <span class="fu">complete</span>(<span class="st">"all"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> age <span class="sc">+</span> tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a></a>  <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         term   estimate  std.error  statistic         df       p.value
1 (Intercept) 71.3427191 0.67872263 105.113218 4670.20788  0.000000e+00
2         age  6.9161820 0.09961066  69.432144  178.28359 5.318364e-131
3          tv -0.4015052 0.09691269  -4.142958   56.62364  1.155999e-04</code></pre>
</div>
</div>
</section>
<section id="why-multiple-synthetic-sets" class="slide level2">
<h2>Why multiple synthetic sets?</h2>
<p>Thank back about the goal of statistical inference: we want to go back to the true data generating model.</p>
<ol type="1">
<li>We do so by reverse engineering the true data generating process</li>
<li>Based on our observed data</li>
<li>We do not know this process; hence multiple synthetic values</li>
</ol>
<p>The multiplicity of the solution allows for smoothing over any Monte Carlo error that may arise from generating a single set.</p>
</section>
<section id="generating-more-synthetic-data" class="slide level2">
<h2>Generating more synthetic data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>mira <span class="ot">&lt;-</span> boys <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a></a>  <span class="fu">mice</span>(<span class="at">m =</span> <span class="dv">6</span>, <span class="at">method =</span> <span class="st">"cart"</span>, <span class="at">printFlag =</span> <span class="cn">FALSE</span>, <span class="at">where =</span> <span class="fu">matrix</span>(<span class="cn">TRUE</span>, <span class="dv">748</span>, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a></a>  <span class="fu">list</span>(<span class="st">'1'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">1</span>), <span class="fu">complete</span>(., <span class="dv">2</span>)),</span>
<span id="cb12-4"><a></a>       <span class="st">'2'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">3</span>), <span class="fu">complete</span>(., <span class="dv">4</span>)),</span>
<span id="cb12-5"><a></a>       <span class="st">'3'</span> <span class="ot">=</span> <span class="fu">rbind</span>(<span class="fu">complete</span>(., <span class="dv">5</span>), <span class="fu">complete</span>(., <span class="dv">6</span>))) <span class="sc">%&gt;%</span> .[<span class="sc">-</span><span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a></a>  data.table<span class="sc">::</span><span class="fu">setattr</span>(<span class="st">"class"</span>, <span class="fu">c</span>(<span class="st">"mild"</span>, <span class="fu">class</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb12-7"><a></a>  <span class="fu">map</span>(<span class="sc">~</span>.x <span class="sc">%$%</span> <span class="fu">lm</span>(hgt <span class="sc">~</span> reg))</span>
<span id="cb12-8"><a></a></span>
<span id="cb12-9"><a></a>mira <span class="sc">%&gt;%</span> <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a></a>  <span class="fu">summary</span>() <span class="sc">%&gt;%</span> tibble<span class="sc">::</span><span class="fu">column_to_rownames</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            estimate std.error statistic      df p.value
(Intercept)  152.014     3.746    40.582 112.526       0
regeast      -17.815     4.461    -3.993 771.076       0
regwest      -23.092     4.397    -5.252  95.353       0
regsouth     -27.579     4.451    -6.196 177.098       0
regcity      -25.928     6.111    -4.243  19.899       0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>mira <span class="sc">%&gt;%</span> <span class="fu">pool</span>(<span class="at">rule =</span> <span class="st">"reiter2003"</span>, </span>
<span id="cb14-2"><a></a>              <span class="at">custom.t =</span> <span class="st">".data$ubar * 2 + .data$b / .data$m"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a></a>  <span class="fu">summary</span>() <span class="sc">%&gt;%</span> tibble<span class="sc">::</span><span class="fu">column_to_rownames</span>(<span class="st">"term"</span>) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            estimate std.error statistic      df p.value
(Intercept)  152.014     5.118    29.703 112.526   0.000
regeast      -17.815     6.228    -2.860 771.076   0.004
regwest      -23.092     5.989    -3.856  95.353   0.000
regsouth     -27.579     6.125    -4.503 177.098   0.000
regcity      -25.928     7.928    -3.270  19.899   0.004</code></pre>
</div>
</div>
<p>Some adjustment to the pooling rules is neede to avoid p-inflation.</p>
<div class="footer">
<p>Raab, Gillian M, Beata Nowok, and Chris Dibben. 2018. “Practical Data Synthesis for Large Samples”. Journal of Privacy and Confidentiality 7 (3):67-97. <a href="https://doi.org/10.29012/jpc.v7i3.407">https://doi.org/10.29012/jpc.v7i3.407.</a></p>
</div>
</section>
<section id="some-care-is-needed" class="slide level2">
<h2>Some care is needed</h2>
<p>With synthetic data generation and synthetic data implementation come some risks.</p>
<p>Any idea?</p>
</section></section>
<section>
<section id="what-should-synthetic-data-be" class="title-slide slide level1 center">
<h1>What should synthetic data be?</h1>

</section>
<section id="testing-validity" class="slide level2">
<h2>Testing validity</h2>
<p>Nowadays many synthetic data cowboys claim that they can generate synthetic data that looks like the real data that served as input.</p>
<p>This is like going to Madam Tusseaud’s: at face value it looks identical, but when experienced in real life it’s just not the same as the living thing.</p>
<p>Many of these synthetic data packages only focus on marginal or conditional distributions. With <code>mice</code> we also consider the inferential properties of the synthetic data.</p>
<p>In general, we argue [^4] that any synthetic data generation procedure should</p>
<ol type="1">
<li>Preserve marginal distributions</li>
<li>Preserve conditional distribution</li>
<li>Yield valid inference</li>
<li>Yield synthetic data that are indistinguishable from the real data</li>
</ol>
<div class="footer">
<p>Volker, T.B.; Vink, G. Anonymiced Shareable Data: Using mice to Create and Analyze Multiply Imputed Synthetic Datasets. Psych 2021, 3, 703-716. <a href="https://doi.org/10.3390/psych3040045">https://doi.org/10.3390/psych3040045</a></p>
</div>
</section>
<section id="example-from-simulation" class="slide level2">
<h2>Example from simulation</h2>
<p>When valid synthetic data are generated, the variance of the estimates is correct, such that the confidence intervals cover the population (i.e.&nbsp;true) value sufficiently [^5]. Take e.g.&nbsp;the following proportional odds model from Volker &amp; Vink (2021):</p>
<table>
<colgroup>
<col style="width: 34%">
<col style="width: 26%">
<col style="width: 21%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">synthetic <br> bias</th>
<th style="text-align: right;">synthetic <br> cov</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td style="text-align: right;">0.461</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.939</td>
</tr>
<tr class="even">
<td>hc</td>
<td style="text-align: right;">-0.188</td>
<td style="text-align: right;">-0.004</td>
<td style="text-align: right;">0.945</td>
</tr>
<tr class="odd">
<td>regeast</td>
<td style="text-align: right;">-0.339</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">0.957</td>
</tr>
<tr class="even">
<td>regwest</td>
<td style="text-align: right;">0.486</td>
<td style="text-align: right;">-0.122</td>
<td style="text-align: right;">0.944</td>
</tr>
<tr class="odd">
<td>regsouth</td>
<td style="text-align: right;">0.646</td>
<td style="text-align: right;">-0.152</td>
<td style="text-align: right;">0.943</td>
</tr>
<tr class="even">
<td>regcity</td>
<td style="text-align: right;">-0.069</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: right;">0.972</td>
</tr>
<tr class="odd">
<td>G1<span class="math inline">\(|\)</span>G2</td>
<td style="text-align: right;">-6.322</td>
<td style="text-align: right;">-0.254</td>
<td style="text-align: right;">0.946</td>
</tr>
<tr class="even">
<td>G2<span class="math inline">\(|\)</span>G3</td>
<td style="text-align: right;">-4.501</td>
<td style="text-align: right;">-0.246</td>
<td style="text-align: right;">0.945</td>
</tr>
<tr class="odd">
<td>G3<span class="math inline">\(|\)</span>G4</td>
<td style="text-align: right;">-3.842</td>
<td style="text-align: right;">-0.244</td>
<td style="text-align: right;">0.948</td>
</tr>
<tr class="even">
<td>G4<span class="math inline">\(|\)</span>G5</td>
<td style="text-align: right;">-2.639</td>
<td style="text-align: right;">-0.253</td>
<td style="text-align: right;">0.947</td>
</tr>
</tbody>
</table>
<div class="footer">
<p>Volker, T.B.; Vink, G. Anonymiced Shareable Data: Using mice to Create and Analyze Multiply Imputed Synthetic Datasets. Psych 2021, 3, 703-716. <a href="https://doi.org/10.3390/psych3040045">https://doi.org/10.3390/psych3040045</a></p>
</div>
</section>
<section id="end-of-presentation" class="slide level2">
<h2>End of presentation</h2>
<center>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://imgc.allpostersimages.com/img/posters/scientist-sits-at-computer-that-has-a-thought-balloon-over-it-that-reads-cartoon_u-L-PGPH660.jpg?artHeight=900&amp;artPerspective=n&amp;artWidth=900" style="width:60.0%"></p>
<figcaption>A. Bacall</figcaption>
</figure>
</div>
</center>

<div class="quarto-auto-generated-content">
<p><img src="logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Gerko Vink @ UU - based on slides by Stef van Buuren, Hanne Oberman and myself - 31 May 2024, Utrecht</p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1200,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 7.5e-2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>